import{_ as B,r as _,e as V,I as x,n as o,c as d,b as t,p as n,C as $,M as T,B as g,F as C,D as N,t as b,u as I,d as L,N as j}from"./index-E1yUqiUC.js";const M={class:"modal"},q={class:"layui-layer-title"},A=T('<div class="layui-layer-content p-4" data-v-1f9bf025><div class="layui-text" data-v-1f9bf025><blockquote class="layui-elem-quote" data-v-1f9bf025>“签到”可获得的社区积分，规则如下</blockquote><table class="layui-table" data-v-1f9bf025><thead data-v-1f9bf025><tr data-v-1f9bf025><th data-v-1f9bf025>连续签到天数</th><th data-v-1f9bf025>每天可获积分</th></tr></thead><tbody data-v-1f9bf025><tr data-v-1f9bf025><td data-v-1f9bf025>&lt;5</td><td data-v-1f9bf025>5</td></tr><tr data-v-1f9bf025><td data-v-1f9bf025>≥5</td><td data-v-1f9bf025>10</td></tr><tr data-v-1f9bf025><td data-v-1f9bf025>≥15</td><td data-v-1f9bf025>15</td></tr><tr data-v-1f9bf025><td data-v-1f9bf025>≥30</td><td data-v-1f9bf025>20</td></tr><tr data-v-1f9bf025><td data-v-1f9bf025>≥100</td><td data-v-1f9bf025>30</td></tr><tr data-v-1f9bf025><td data-v-1f9bf025>≥365</td><td data-v-1f9bf025>50</td></tr></tbody></table><div class="text-sm" data-v-1f9bf025><p data-v-1f9bf025>中间若有间隔，则连续天数重新计算</p><p class="text-orange-500" data-v-1f9bf025>不可复用程序自动签到，否则积分清零</p></div></div></div>',1),D={__name:"SignInfo",props:{isShow:{default:!1,type:Boolean}},emits:["closeModal"],setup(h,{emit:f}){const v=f,i=_(!1),u=()=>{i.value=!0,setTimeout(()=>{v("closeModal"),i.value=!1},600)};return(p,c)=>V((o(),d("div",M,[t("div",{class:"mask",onClick:c[0]||(c[0]=r=>u())}),t("div",{class:$(["layui-layer layui-layer-page",{bounceIn:h.isShow,bounceOut:i.value}])},[t("div",q,[n(" 签到说明 "),t("i",{class:"layui-icon layui-icon-close cursor-pointer",onClick:c[1]||(c[1]=r=>u())})]),A],2)],512)),[[x,h.isShow]])}},O=B(D,[["__scopeId","data-v-1f9bf025"]]),U={class:"modal"},Y={class:"layui-layer-title"},F={class:"layui-layer-content pd0"},z={class:"layui-tab layui-tab-brief"},E={class:"layui-tab-title"},H={class:"layui-tab-content fly-signin-list"},P={class:"layui-tab-item layui-show"},G=["src"],J=["src"],K={class:"fly-link"},Q={key:2,class:"fly-grey"},R={key:3,class:"fly-grey"},W={class:"orange"},X={__name:"SignList",props:{modelValue:{default:!1,type:Boolean}},emits:["update:modelValue"],setup(h,{emit:f}){const v=h,i=f,u=_(!1),p=g({get:()=>v.modelValue,set:m=>{i("update:modelValue",m)}}),c=()=>{u.value=!0,setTimeout(()=>{p.value=!1,u.value=!1},600)},r=_(0),S=_([{name:"abc",count:1,created:"2024-01-01"}]),y=m=>{r.value=m};return(m,l)=>V((o(),d("div",U,[t("div",{class:"mask",onClick:l[0]||(l[0]=s=>c())}),t("div",{class:$(["layui-layer layui-layer-page",{bounceIn:p.value,bounceOut:u.value}])},[t("div",Y,[n(" 签到活跃榜 - TOP "),t("i",{class:"layui-icon layui-icon-close pull-right",onClick:l[1]||(l[1]=s=>c())})]),t("div",F,[t("div",z,[t("ul",E,[t("li",{class:$({"layui-this":r.value===2}),onClick:l[2]||(l[2]=s=>y(2))},"最新签到",2),t("li",{class:$({"layui-this":r.value===1}),onClick:l[3]||(l[3]=s=>y(1))},"今日最快",2),t("li",{class:$({"layui-this":r.value===0}),onClick:l[4]||(l[4]=s=>y(0))},"总签到榜",2)]),t("div",H,[t("ul",P,[(o(!0),d(C,null,N(S.value,(s,w)=>(o(),d("li",{key:"sign"+w,class:"sign-item"},[r.value===0?(o(),d("img",{key:0,src:s.pic?s.pic:"/img/bear-200-200.jpg",alt:"",class:"mr1"},null,8,G)):(o(),d("img",{key:1,src:s.uid?s.uid.pic:"/img/bear-200-200.jpg",class:"mr1"},null,8,J)),t("cite",K,b(s.name?s.name:s.uid.name),1),r.value!==0?(o(),d("span",Q,"签到于 "+b(s.created),1)):(o(),d("span",R,[n(" 已经连续签到 "),t("i",W,b(s.count),1),n("天 ")]))]))),128))])])])])],2)],512)),[[x,p.value]])}},Z=B(X,[["__scopeId","data-v-b758dd75"]]),tt={class:"fly-panel fly-signin"},st={class:"fly-panel-title"},at=t("i",{class:"fly-mid"},null,-1),et=t("i",{class:"fly-mid"},null,-1),lt=t("span",{class:"layui-badge-dot"},null,-1),nt={class:"fly-signin-days"},it={class:"fly-panel-main fly-signin-main"},ot={class:"layui-hide-sm layui-show-md-inline-block"},dt={class:"layui-btn layui-btn-disabled"},ct={__name:"Sign",setup(h){const f=_(!1),v=_(!1),i=I(),u=g(()=>{var e;return((e=i.user)==null?void 0:e.isSign)||!1}),p=g(()=>u.value?"今日已签到":"今日签到"),c=g(()=>{var a;const e=((a=i.user)==null?void 0:a.count)||0;return e<5?5:e<15?10:e<30?15:e<100?20:e<365?30:50}),r=g(()=>{var e;return((e=i.user)==null?void 0:e.count)||0}),S=g(()=>i.isLogin),y=_(!1),m=()=>{f.value=!0},l=()=>{y.value=!0},s=async()=>{if(console.log("签到"),v.value)return;v.value=!0;const e=await j().finally(()=>{v.value=!1}),a={...I.user,...e.data,isSign:!0};i.setUser(a)},w=()=>{f.value=!1};return(e,a)=>(o(),d("div",tt,[t("div",st,[n(" 签到 "),at,t("a",{id:"LAY_signinHelp",href:"javascript:;",class:"fly-link",onClick:a[0]||(a[0]=k=>m())},"说明"),et,t("a",{id:"LAY_signinTop",href:"javascript:;",class:"fly-link",onClick:a[1]||(a[1]=k=>l())},[n(" 活跃榜 "),lt]),V(t("span",nt,[n(" 已连续签到 "),t("cite",null,b(r.value),1),n("天 ")],512),[[x,u.value||S.value]])]),t("div",it,[u.value?(o(),d(C,{key:1},[t("button",dt,b(p.value),1),t("span",null,[n(" 获得了 "),t("cite",null,b(c.value),1),n("飞吻 ")])],64)):(o(),d(C,{key:0},[t("button",{id:"LAY_signin",class:"layui-btn layui-btn-danger",onClick:a[2]||(a[2]=k=>s())},"今日签到"),t("span",ot,[n(" 可获得 "),t("cite",null,b(c.value),1),n("飞吻 ")])],64))]),L(O,{"is-show":f.value,onCloseModal:a[3]||(a[3]=k=>w())},null,8,["is-show"]),L(Z,{modelValue:y.value,"onUpdate:modelValue":a[4]||(a[4]=k=>y.value=k)},null,8,["modelValue"])]))}};export{ct as _};
